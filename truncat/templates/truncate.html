{% extends "base.html" %}

{% block content %}
    <!-- Contact-->
    <section class="masthead" id="contact">
        <div class="container">
            <div class="text-center">
                <h4 class="section-heading text-uppercase">Сократить ссылку</h4>
                <p>
                <h3 class="section-subheading text-muted"></h3>
            </div>  
            <form id="contactForm" method ='POST'  action="{{ url_for('truncate') }}">
                {{ form.csrf_token }}  
                <div class="row align-items-stretch mb-5">

                    <div class="text-center">
                        <div class="form-group">
                            {{form.source}}
                        </div>
                        <p></p>
                        <div class="form-group">    
                            {{form.output}}
                        </div>
                    </div>
                    <p></p>
                    <div class="text-center">
                        <button class="btn btn-primary"  
                            type="submit" title="Сократить ссылку" name='btm' value='submit'>Сократить</button>
                        <button class="btn btn-primary"  
                            type="submit" title="Копировать в память короткую ссылку" name='btm' value = 'copy'>Копировать</button>
                        <button class="btn btn-primary"  
                            type="submit" title="Перейти по ссылке" name='btm' value='redirect'>Перейти</button>
                        {% if g.logged and form.output.data %}
                        <a href="{{ url_for('edit', id=0) }}" class="btn btn-primary"  
                            type="submit" title="Редактировать мою ссылку">Редактировать</a>
                        {% endif %}
                    </div>

                </div>

                    {% with messages = get_flashed_messages() %}
                        {% if messages %}
                            <div class=flashes>
                            {% for message in messages %}
                                <h5 class="section-subheading text-muted">{{ message }}</h5>
                            {% endfor %}
                            </div>
                        {% endif %}
                    {% endwith %}
            </form>
        </div>
    </section>
{% endblock content %}